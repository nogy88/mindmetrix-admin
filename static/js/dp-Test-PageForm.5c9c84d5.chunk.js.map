{"version":3,"file":"static/js/dp-Test-PageForm.5c9c84d5.chunk.js","mappings":"sPA0HA,UApHA,SAAkB,GAA0D,IAAxDA,EAAO,EAAPA,QAASC,EAAW,EAAXA,YAAaC,EAAO,EAAPA,QAASC,EAAY,EAAZA,aAAcC,EAAM,EAANA,OAC/D,EAAeC,EAAAA,EAAAA,UAARC,GAAsB,YAAlB,GACX,GAA8BC,EAAAA,EAAAA,WAAS,GAAM,eAAtCC,EAAO,KAAEC,EAAU,MAE1BC,EAAAA,EAAAA,YAAU,WAaQ,OAAZR,IAXFO,GAAW,IACXE,EAAAA,EAAAA,IAAW,GAAD,OAAIC,EAAAA,GAAAA,OAAU,OAAGV,IACxBW,MAAK,SAACC,GACLR,EAAKS,eAAeD,EAAIE,KAC1B,IACCC,OAAM,SAACC,GACNC,EAAAA,GAAAA,MAAc,wEAAD,OAAkBD,EAAME,SACvC,IACCC,SAAQ,kBAAMZ,GAAW,EAAM,IAKtC,GAAG,CAACP,IAEJ,IAAMoB,EAAQ,yCAAG,mFACfhB,EACGiB,iBACAV,KAAI,yCAAC,WAAOW,GAAM,sEACA,GAAjBf,GAAW,IACPP,EAAQ,CAAD,gCACHuB,EAAAA,EAAAA,IAAWb,EAAAA,GAAAA,OAAW,kBACvBY,GAAM,IACTtB,QAASA,EACTE,OAAQA,EACRsB,KAAM,UACL,KAAD,yCAEIC,EAAAA,EAAAA,IAAYf,EAAAA,GAAAA,OAAW,kBACxBY,GAAM,IACTpB,OAAQA,EACRsB,KAAM,UACL,KAAD,EAEJP,EAAAA,GAAAA,QAAgB,kHAChBhB,IACAM,GAAW,GACXR,IAAc,4CACf,mDApBI,IAqBJgB,OAAM,SAACC,GACNC,EAAAA,GAAAA,MAAcD,EAAME,SACpBX,GAAW,EACb,IAAG,2CACN,kBA5Ba,mCAmCd,OACE,SAAC,IAAM,CACLT,QAASA,EACT4B,MAAO1B,EAAU,sEAAiB,sEAClC2B,UAAW,QACXC,UAAU,EACVC,QAXe,WACjB9B,IACAK,EAAK0B,aACP,EASIC,MAAO,IACPC,QACE,gBAAKC,MAAO,CAAEC,UAAW,SAAU,UACjC,SAAC,KAAY,CAACC,QAAS,kBAAMf,GAAU,MAE1C,UAGD,SAAC,IAAQ,CAACd,QAASA,EAAQ,UACzB,SAAC,IAAI,CACH8B,OAAO,WACPC,kBAAgB,EAEhBC,oBAAkB,EAClBlC,KAAMA,EAAK,UAEX,UAAC,IAAG,CAACmC,QAAQ,SAASC,OAAQ,GAAG,WAC/B,SAAC,KAAQ,CAACC,MAAM,qBAAMC,KAAM,OAAQC,UAAQ,KAE5C,SAAC,KAAQ,CACPC,SAAS,QACTH,MAAM,+FACNC,KAAM,gBACNC,UAAQ,KAGV,SAAC,KAAQ,CACPF,MAAM,6CACNC,KAAM,OACNE,SAAS,WACTD,UAAQ,KAGV,SAAC,KAAQ,CACPC,SAAS,QACTH,MAAM,uHACNC,KAAM,gBACNC,UAAQ,KAGV,SAAC,KAAQ,CACPF,MAAM,uCACNC,KAAM,UACNE,SAAS,SACTD,UAAQ,YAtCX,QA6CX,C","sources":["modules/test/views/Test/PageForm.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Drawer, message, Form, Row, Skeleton } from \"antd\";\r\nimport { CustomButton, FormItem } from \"components\";\r\nimport { getRequest, postRequest, putRequest } from \"api\";\r\nimport { test } from \"api/endpoints\";\r\n\r\nfunction PageForm({ visible, handleClose, groupId, refreshTable, testId }) {\r\n  const [form] = Form.useForm();\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const getFactor = () => {\r\n      setLoading(true);\r\n      getRequest(`${test.group}${groupId}`)\r\n        .then((res) => {\r\n          form.setFieldsValue(res.data);\r\n        })\r\n        .catch((error) => {\r\n          message.error(`Алдаа гарлаа. ${error.Message}`);\r\n        })\r\n        .finally(() => setLoading(false));\r\n    };\r\n\r\n    if (groupId !== null) getFactor();\r\n    // eslint-disable-next-line\r\n  }, [groupId]);\r\n\r\n  const onSubmit = async () => {\r\n    form\r\n      .validateFields()\r\n      .then(async (values) => {\r\n        setLoading(true);\r\n        if (groupId) {\r\n          await putRequest(test.group, {\r\n            ...values,\r\n            groupId: groupId,\r\n            testId: testId,\r\n            type: \"Page\",\r\n          });\r\n        } else {\r\n          await postRequest(test.group, {\r\n            ...values,\r\n            testId: testId,\r\n            type: \"Page\",\r\n          });\r\n        }\r\n        message.success(\"Амжилттай хадгаллаа.\");\r\n        refreshTable();\r\n        setLoading(false);\r\n        handleClose();\r\n      })\r\n      .catch((error) => {\r\n        message.error(error.Message);\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  const setInitial = () => {\r\n    handleClose();\r\n    form.resetFields();\r\n  };\r\n\r\n  return (\r\n    <Drawer\r\n      visible={visible}\r\n      title={groupId ? \"Хуудас засах\" : \"Хуудас нэмэх\"}\r\n      placement={\"right\"}\r\n      closable={false}\r\n      onClose={setInitial}\r\n      width={400}\r\n      footer={\r\n        <div style={{ textAlign: \"right\" }}>\r\n          <CustomButton onClick={() => onSubmit()} />\r\n        </div>\r\n      }\r\n      key={\"group\"}\r\n    >\r\n      <Skeleton loading={loading}>\r\n        <Form\r\n          layout=\"vertical\"\r\n          hideRequiredMark\r\n          // size=\"small\"\r\n          scrollToFirstError\r\n          form={form}\r\n        >\r\n          <Row justify=\"center\" gutter={32}>\r\n            <FormItem label=\"Нэр\" name={\"name\"} required />\r\n\r\n            <FormItem\r\n              itemType=\"radio\"\r\n              label=\"Нэр харагдах эсэх\"\r\n              name={\"isVisibleName\"}\r\n              required\r\n            />\r\n\r\n            <FormItem\r\n              label=\"Тайлбар\"\r\n              name={\"desc\"}\r\n              itemType=\"textarea\"\r\n              required\r\n            />\r\n\r\n            <FormItem\r\n              itemType=\"radio\"\r\n              label=\"Тайлбар харагдах эсэх\"\r\n              name={\"isVisibleDesc\"}\r\n              required\r\n            />\r\n\r\n            <FormItem\r\n              label=\"Эрэмбэ\"\r\n              name={\"orderNo\"}\r\n              itemType=\"number\"\r\n              required\r\n            />\r\n          </Row>\r\n        </Form>\r\n      </Skeleton>\r\n    </Drawer>\r\n  );\r\n}\r\n\r\nexport default PageForm;\r\n"],"names":["visible","handleClose","groupId","refreshTable","testId","Form","form","useState","loading","setLoading","useEffect","getRequest","test","then","res","setFieldsValue","data","catch","error","message","Message","finally","onSubmit","validateFields","values","putRequest","type","postRequest","title","placement","closable","onClose","resetFields","width","footer","style","textAlign","onClick","layout","hideRequiredMark","scrollToFirstError","justify","gutter","label","name","required","itemType"],"sourceRoot":""}