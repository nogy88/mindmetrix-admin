"use strict";(self.webpackChunkmind=self.webpackChunkmind||[]).push([[228,108],{7180:function(e,t,r){r.r(t);var n=r(3508),s=r(6515),u=r(3032),i=r(3430),a=r(2791),c=r(5897),l=r(419),o=r(8894),d=r(8361),f=r(6106),h=r(9034),x=r(7856),Z=r(1226),p=r(184);t.default=function(e){var t=e.visible,r=e.factorId,v=e.resultId,b=e.handleClose,I=e.refreshTable,m=c.Z.useForm(),j=(0,i.Z)(m,1)[0],g=(0,a.useState)(!1),y=(0,i.Z)(g,2),k=y[0],M=y[1];(0,a.useEffect)((function(){null!==v&&(M(!0),(0,x.A_)("".concat(Z.Bu.factorResult).concat(v)).then((function(e){j.setFieldsValue(e.data)})).catch((function(e){l.ZP.error("\u0410\u043b\u0434\u0430\u0430 \u0433\u0430\u0440\u043b\u0430\u0430. ".concat(e.Message))})).finally((function(){return M(!1)})))}),[v]);var w=function(){var e=(0,u.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j.validateFields().then(function(){var e=(0,u.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M(!0),!v){e.next=6;break}return e.next=4,(0,x.GH)(Z.Bu.factorResult,(0,s.Z)((0,s.Z)({},t),{},{factorId:r,resultId:v}));case 4:e.next=8;break;case 6:return e.next=8,(0,x.j0)(Z.Bu.factorResult,(0,s.Z)((0,s.Z)({},t),{},{factorId:r}));case 8:l.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0430\u0434\u0433\u0430\u043b\u043b\u0430\u0430."),I(),M(!1),b();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){l.ZP.error(e.Message),M(!1)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,p.jsx)(o.Z,{visible:t,title:v?"\u0425\u04af\u0447\u0438\u043d \u0437\u04af\u0439\u043b\u0438\u0439\u043d \u04af\u0440 \u0434\u04af\u043d \u0437\u0430\u0441\u0430\u0445":"\u0425\u04af\u0447\u0438\u043d \u0437\u04af\u0439\u043b\u0438\u0439\u043d \u04af\u0440 \u0434\u04af\u043d \u043d\u044d\u043c\u044d\u0445",placement:"right",closable:!1,onClose:function(){b(),j.resetFields()},width:400,footer:(0,p.jsx)("div",{style:{textAlign:"right"},children:(0,p.jsx)(h.op,{onClick:function(){return w()}})}),children:(0,p.jsx)(d.Z,{loading:k,children:(0,p.jsx)(c.Z,{layout:"vertical",hideRequiredMark:!0,scrollToFirstError:!0,form:j,children:(0,p.jsxs)(f.Z,{justify:"center",gutter:32,children:[(0,p.jsx)(h.xJ,{label:"\u0422\u0430\u0439\u043b\u0431\u0430\u0440",name:"desc",required:!0}),(0,p.jsx)(h.xJ,{label:"\u0414\u043e\u043e\u0434 \u043e\u043d\u043e\u043e",name:"scoreMin",itemType:"number",required:!0}),(0,p.jsx)(h.xJ,{label:"\u0414\u044d\u044d\u0434 \u043e\u043d\u043e\u043e",name:"scoreMax",itemType:"number",required:!0})]})})})},"factor")}},6623:function(e,t,r){r.r(t);var n=r(3430),s=r(2791),u=r(419),i=r(7856),a=r(1226),c=r(9034),l=r(7180),o=r(184);t.default=function(e){var t=e.factorId,r=(0,s.useState)(!1),d=(0,n.Z)(r,2),f=d[0],h=d[1],x=(0,s.useState)(!1),Z=(0,n.Z)(x,2),p=(Z[0],Z[1]),v=(0,s.useState)([]),b=(0,n.Z)(v,2),I=(b[0],b[1]),m=(0,s.useState)({visible:!1,resultId:null}),j=(0,n.Z)(m,2),g=j[0],y=j[1];return(0,s.useEffect)((function(){null!==t&&(p(!0),(0,i.A_)(a.Bu.factorResults,{factorId:t,Pid:1,Psize:100}).then((function(e){I(e.data.results),console.log(e.data.results)})).catch((function(e){u.ZP.error("\u0410\u043b\u0434\u0430\u0430 \u0433\u0430\u0440\u043b\u0430\u0430. ".concat(e.Message))})).finally((function(){return p(!1)})))}),[t,f]),(0,o.jsxs)("div",{style:{padding:"10px 40px"},children:[(0,o.jsx)(c.Gi,{title:"\u0425\u04af\u0447\u0438\u043d \u0437\u04af\u0439\u043b\u0438\u0439\u043d \u04af\u0440 \u0434\u04af\u043d",primaryKey:["resultId"],columns:[{title:"\u0422\u0430\u0439\u043b\u0431\u0430\u0440",dataIndex:"desc",align:"center"},{title:"\u0414\u043e\u043e\u0434 \u043e\u043d\u043e\u043e",dataIndex:"scoreMin",align:"center"},{title:"\u0414\u044d\u044d\u0434 \u043e\u043d\u043e\u043e",dataIndex:"scoreMax",align:"center"}],endpoint:a.Bu.factorResult,endpoints:a.Bu.factorResults,addFunc:function(){return y({resultId:null,visible:!0})},onEdit:function(e){return y({resultId:e,visible:!0})},otherFilters:{factorId:t},refresh:f}),(0,o.jsx)(l.default,{visible:g.visible,factorId:t,resultId:g.resultId,handleClose:function(){return y({resultId:null,visible:!1})},refreshTable:function(){return h(!f)}})]})}}}]);
//# sourceMappingURL=dp-Test-FactorResultList.98dc97ad.chunk.js.map